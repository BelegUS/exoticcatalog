<div id="cartContent">
    <h3>{{ 'cart'|trans }}</h3>
    {% if cart %}
        {% set previousBrandName = '' %}
        {% set previousModelName = '' %}
        {% set previousPartsGroupName = '' %}

        <ul>

            {% for item in cart %}
                {% if loop.first == false %}
                    {% if item['part'].partsgroup.model.brand.name != previousBrandName  %}
                    </ul></li>
                {% endif %}
                {% if item['part'].partsgroup.model.name != previousModelName  %}
            </ul></li>
        {% endif %}
        {% if item['part'].partsgroup.name != previousPartsGroupName  %}
    </ul></li>
{% endif %}   
{% endif %}

{% if item['part'].partsgroup.model.brand.name != previousBrandName  %}
    <li> {{ item['part'].partsGroup.model.brand.name }} <ul>
        {% endif %}
        {% if item['part'].partsgroup.model.name != previousModelName  %}
            <li> {{ item['part'].partsGroup.model.name }} <ul>
                {% endif %}
                {% if item['part'].partsgroup.name != previousPartsGroupName  %}
                    <li> {{ item['part'].partsGroup.name }} <ul class="partList">
                        {% endif %}   
                        <li> {{ item['part'].name }} - {{item['part'].getActualPriceText(exchangeRates) }}</li>

                        {% if loop.last == true %}
                        </ul></li>
                </ul></li>
        </ul></li>
    {% endif %}  

{% set previousBrandName = item['part'].partsgroup.model.brand.name %}
{% set previousModelName = item['part'].partsgroup.model.name %}
{% set previousPartsGroupName = item['part'].partsgroup.name %}   

{% endfor %}
</ul>

{% endif %}
</div>
